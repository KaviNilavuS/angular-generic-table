<h2>Advanced</h2>
<p>Fetch data using REST-service, expand rows and display a custom component, use custom functions for rendering, sorting and exporting. Apply predefined filter and simple function for adding new random data to table. To control columns we use the <code><a routerLink="/column-settings-component">ColumnSettingsComponent</a></code>. This example also utilizes column stacking on tablets and mobile devices so resize the browser and see what happens with the layout on smaller screens.</p>
<div class="alert alert-info">A little word of advice regarding number of rows to display. Although the table supports displaying all rows at once by setting <code>[gtOptions]="{{ '{' }}numberOfRows:0{{ '}' }}"</code> or by passing <code>'all'</code> to the <code>changeRowLength</code> method like in the example below, generic table still needs to render a lot of rows which currently makes it a bit unresponsive. Hopefully this will be improved in future releases but in the meantime it's recommended to limit the number of rendered rows and use pagination as it allows you to "display" hundreds of thousands rows.</div>
<div class="card mb-5">
  <div class="card-header">Example</div>
  <div class="card-body">
    <form class="form form-inline mb-4">
      <label for="rows" class="form-control-label mr-sm-2">Rows</label>
      <select id="rows" class="form-control form-control-sm mr-sm-2 mb-3 mb-sm-0" #rowLength (change)="myTable.changeRowLength(rowLength.value)">
        <option value=10>10</option>
        <option value=25>25</option>
        <option value=50>50</option>
        <option value=100>100</option>
        <option value=all>All</option>
      </select>
      <input class="form-control form-control-sm mr-sm-2 mb-3 mb-sm-0" #search (keyup)="myTable.gtSearch(search.value)" placeholder="Search"/>
      <div ngbDropdown class="col-12 col-sm-auto mr-sm-3 mb-3 mb-sm-0 p-0">
        <button class="btn btn-sm btn-primary w-100" id="actions" ngbDropdownToggle>Actions</button>
        <div ngbDropdownMenu aria-labelledby="actions">
          <button class="dropdown-item" (click)="applyFilter();">Apply predefined filter</button>
          <button class="dropdown-item" (click)="myTable.gtClearFilter()">Remove filter</button>
          <button class="dropdown-item" (click)="addData()">Add data</button>
          <button class="dropdown-item" (click)="deleteData()">Delete first row</button>
          <button class="dropdown-item" (click)="deleteAll()">Delete rows where gender = male</button>
          <button class="dropdown-item" (click)="showColumnControls = !showColumnControls">Toggle columns</button>
          <button class="dropdown-item" (click)="myTable.exportCSV()">Export to CSV</button>
          <button class="dropdown-item" (click)="myTable.selectAllRows()">Select all</button>
          <button class="dropdown-item" (click)="myTable.deselectAllRows()">Deselect all</button>
          <button class="dropdown-item" (click)="expandAllRows()">Expand all</button>
          <button class="dropdown-item" (click)="collapseAllRows()">Collapse all</button>
          <!--<button class="dropdown-item" (click)="getData()">Refresh data</button>-->
        </div>
      </div>
      <small class="form-text text-muted col-12 col-xl-auto mb-2 mt-lg-2 my-xl-auto row"><gt-table-info [genericTable]="myTable"></gt-table-info> Number of selected rows: {{selectedRows}}</small>
      <div *ngIf="showColumnControls" class="col-12 row mt-xl-2">
        <label class="form-control-label mr-sm-2">Visible columns:</label>
        <div class="form-check form-check-inline ml-0 ml-sm-2" *ngFor="let column of configObject.settings">
          <label class="form-check-label">
            <input type="checkbox" name="{{column.objectKey}}" class="form-check-input" [(ngModel)]="column.visible" (change)="myTable.redraw()">
            {{configObject.fields | gtProperty:column.objectKey:'name'}}
          </label>
        </div>
      </div>
    </form>
    <button class="btn-link" (click)="columnSettings.toggleColumnSettings()"> {{columnSettings.active ? 'Hide column settings':'Show column settings'}}</button>
    <gt-column-settings [genericTable]="myTable" #columnSettings (gtEvent)="trigger($event)">
      <div class="table-responsive">
        <generic-table [gtClasses]="'table-hover'" #myTable [gtSettings]="configObject.settings" [gtFields]="configObject.fields" [gtData]="configObject.data" [gtOptions]="{stack:true, highlightSearch:true, rowSelection:true}" (gtEvent)="trigger($event)"></generic-table>
      </div>
      <div class="text-center">
        <gt-pagination [gtClasses]="'justify-content-center'" [genericTable]="myTable"></gt-pagination>
      </div>
    </gt-column-settings>
  </div>
  <div class="card-footer" #restExample>
  </div>
</div>
